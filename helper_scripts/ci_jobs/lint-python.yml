lint-python:
    stage: pre_commit
    image: "python:3.10"
    tags:
        - linux
    before_script:
        - echo 'Installing linting tools...'
        - pip install flake8 black isort
    script:
        - echo 'Running Python linting checks...'
        - python helper_scripts/lint_python.py --verbose 2>&1 | tee linting_output.log
    artifacts:
        paths:
            - linting_output.log
        expire_in: 1 week
        when: always
    rules:
        - if: $CI_COMMIT_REF_PROTECTED == "true"
        - if: $CI_PIPELINE_SOURCE == "merge_request_event"
        - if: $CI_COMMIT_BRANCH == "main" || $CI_COMMIT_TAG =~ /^v?[0-9]+\.[0-9]+\.[0-9]+/
        - if: $TEST_CUSTOM_BRANCH == "1"
        - if: $TEST_ALL_PYTHONS == "1"
        #- if: $RUN_LINTING == "1"
    allow_failure: false 