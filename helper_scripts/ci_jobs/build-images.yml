docker-image-builder:
  stage: build_images
  tags:
    - linux
  image: 
    name: gcr.io/kaniko-project/executor:debug
    entrypoint: [""]
  script:
    - /kaniko/executor 
      --context "${CI_PROJECT_DIR}/.cicd/build-linux"
      --dockerfile "${CI_PROJECT_DIR}/.cicd/build-linux/Dockerfile"
      --destination "${CI_REGISTRY_IMAGE}/linux-builder:${CI_COMMIT_TAG}"
  rules:
    - if: $UPDATE_DOCKER_IMAGE == "1"
    #- changes:
    #    - .cicd/build-linux/Dockerfile
    #    - .cicd/build-linux/Toolchain.cmake