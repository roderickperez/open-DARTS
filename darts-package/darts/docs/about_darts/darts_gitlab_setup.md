# How DARTS is built

The source code of DARTS is spread over 5 repositories hosted on gitlab.tudelft.nl and is built and tested automatically via continuous integration / continuous deployment (CI/CD) service. DARTS is python package with binary extensions, built from C++/OpenMP/CUDA code. The python part of DARTS is maintained in the current (darts-package) repo. The two extensions - engines and physics - live in the darts-engines and darts-physics. Each of them has a proprietary part which is placed into a separate, private repo: engines depend on linear solvers while physics depend on flash. The long-term goal is to get rid of proprietary pieces replacing them with open-source or internally developed code.

The build process reminds a chain. First, proprietary libraries (linear solvers and flash) are built. They are compiled as static libraries and are not aware of python. Then, binary extensions (engines and physics) are built. They are linked to a specific python version. Finally, the python package along with extensions is packed into a python wheel. In order to make sure that the package works as expected, a test suite is executed for every compiled wheel in darts-models repo. Each of these steps is performed as a Gitlab pipeline of the corresponding repo. Once any the repos change (someone pushes a commit), its pipeline is triggered. If it successfully finishes, then the pipeline of the next link in the chain is triggered, and so one until the whole package is built and tested. The pipeline status of each of the steps described above can be monitored via badges on the main page.

DARTS is wheel is compiled for Windows and Linux platforms, for Python 3.5, 3.6, 3.7 and 3.8. Therefore, starting from engines and physics extensions and for every subsequent step, the pipeline consists of 8 independent jobs. In this way, every version of DARTS package is verified to function as expected. Intermediate build results along with python wheels can be downloaded according to the instructions in the installation section of the getting started page.